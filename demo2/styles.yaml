sources:
    local:
        type: 'GeoJSONTileSource'
        url:  'http://vector.mapzen.com/osm/all/{z}/{x}/{y}.json'
        url: '../{z}-{x}-{y}.json'
        max_zoom: 16

layers:
    earth:
        geometry:
            source: local
            filter: earth
        style:
            order: 1
            color: black # must set a vertex color for shader to be applied
            name: earth-style

    landuse:
        geometry:
            source: local
            filter: landuse
        style:
            order: 2
            color: black
            name: landuse-style

    water:
        geometry:
            source: local
            filter: water
        style:
            order: 3
            color: black
            name: water-style

    roads:
        geometry:
            source: local
            filter: roads
        style:
            order: 4
            name: roads-style
            color: black
            width: 2
        highway:
            filter: { kind: highway }
            style:
                width: 20
        major_road:
            filter: { kind: major_road }
            style:
                width: 10
        minor_road:
            filter: { kind: minor_road }
            style:
                width: 5
        path: 
            filter: { kind: path }
            style:
                width: 1

    buildings:
        geometry:
            source: local
            filter: buildings
        style:
            order: 5
            color: black
            name: buildings-style

styles:
    buildings-style:
        extends: polygons
        shaders:
            uniforms:
                u_color: [.8, .8, .8]
            transforms:
                fragment: color.rgb = u_color;

    earth-style:
        extends: polygons
        shaders:
            uniforms:
                u_color: [.5, .5, .5]
            transforms:
                fragment: color.rgb = u_color;

    landuse-style:
        extends: polygons
        shaders:
            uniforms:
                u_color: [.6, .6, .6]
            transforms:
                fragment: color.rgb = u_color;

    water-style:
        extends: polygons
        shaders:
            uniforms:
                u_color: [.4, .4, .4]
            transforms:
                fragment: color.rgb = u_color;

    roads-style:
        extends: polygons
        shaders:
            uniforms:
                u_color: [1, 1, 1]
            transforms:
                fragment: color.rgb = u_color;
